<div class="weekly-planner-container">
  <!-- Header -->
  <div class="planner-header p-4 md:p-6">
    <h2 class="text-2xl md:text-3xl font-bold mb-2">Weekly Schedule</h2>
    <p class="text-gray-600">Week {{ weekNumber }}</p>
  </div>

  <!-- Desktop View: Table Layout (hidden on mobile) -->
  <div class="hidden md:block">
    <div class="table-container p-6 overflow-x-auto">
      <app-schedule-table
        [days]="plannedDays"
        [slotIndices]="getSlotIndices()"
        [slotDurationMinutes]="slotDurationMinutes"
        [classMap]="desktopClassMap"
        [weekNumber]="weekNumber"
      ></app-schedule-table>
    </div>
  </div>

  <!-- Mobile View: 2-Day Table Display (visible on mobile only) -->
  <div class="md:hidden">
    <!-- Navigation Controls -->
    <div class="navigation-controls flex items-center justify-between p-3 bg-white border-b">
      <!-- Day Navigation -->
      <div class="flex items-center gap-2">
        <button
          mat-icon-button
          [disabled]="!canGoToPreviousDayPair()"
          (click)="goToPreviousDayPair()"
          class="prev-btn"
          title="Previous 2 days"
        >
          <mat-icon>chevron_left</mat-icon>
        </button>
        <span class="text-xs font-medium text-gray-600">Days</span>
        <button
          mat-icon-button
          [disabled]="!canGoToNextDayPair()"
          (click)="goToNextDayPair()"
          class="next-btn"
          title="Next 2 days"
        >
          <mat-icon>chevron_right</mat-icon>
        </button>
      </div>

      <!-- Week Display -->
      <div class="text-center">
        <p class="text-xs font-semibold text-gray-700">Week {{ weekNumber }}</p>
      </div>

      <!-- Week Navigation (passed from parent) -->
      <div class="flex items-center gap-2">
        <button
          mat-icon-button
          [disabled]="!canGoToPreviousWeek"
          (click)="onPreviousWeek()"
          class="prev-btn"
          title="Previous week"
        >
          <mat-icon>chevron_left</mat-icon>
        </button>
        <span class="text-xs font-medium text-gray-600">Weeks</span>
        <button
          mat-icon-button
          [disabled]="!canGoToNextWeek"
          (click)="onNextWeek()"
          class="next-btn"
          title="Next week"
        >
          <mat-icon>chevron_right</mat-icon>
        </button>
      </div>
    </div>

    <!-- Mobile Table View -->
    <div class="mobile-table-container p-3 overflow-x-auto">
      <app-schedule-table
        [days]="getCurrentDayPair()"
        [slotIndices]="getMobileSlotIndices()"
        [slotDurationMinutes]="slotDurationMinutes"
        [classMap]="mobileClassMap"
        [weekNumber]="weekNumber"
      ></app-schedule-table>
    </div>

  </div>

  <!-- Legend -->
  <div class="legend mt-6 md:mt-8 p-4 bg-blue-50 rounded-lg mx-4 md:mx-6 mb-4 md:mb-6">
    <h3 class="font-semibold mb-3">Legend</h3>
    <div class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-4 gap-3 md:gap-4">
      <div class="flex items-center gap-2">
        <button mat-raised-button class="w-8 h-8 p-0 available">A</button>
        <span class="text-sm">Available</span>
      </div>
      <div class="flex items-center gap-2">
        <button mat-raised-button disabled class="w-8 h-8 p-0 booked book-in-progress">B</button>
        <span class="text-sm">In Progress</span>
      </div>
      <div class="flex items-center gap-2">
        <button mat-raised-button disabled class="w-8 h-8 p-0 booked">B</button>
        <span class="text-sm">Booked</span>
      </div>
      <div class="flex items-center gap-2">
        <button mat-raised-button disabled class="w-8 h-8 p-0 booked paid">P</button>
        <span class="text-sm">Paid</span>
      </div>
    </div>
  </div>
</div>

